<div class="container">
	<div id="content">

		<div id="content-header">
			<div class="row-fluid">
				<div class="span6">
					<h1>User Profile</h1>
				</div>
			</div>
			<hr>
		</div>
		<div class="check">
			
			<img src="https://4.bp.blogspot.com/-2UPJD5hegLs/UR4MlzkGTUI/AAAAAAAAAWk/xpff536gpIQ/s1600/mycover.jpg" alt="https://4.bp.blogspot.com/-2UPJD5hegLs/UR4MlzkGTUI/AAAAAAAAAWk/xpff536gpIQ/s1600/mycover.jpg" class="cover" /> 
			<div class="check2">
				<%if current_user.id == @user.id %>
  					<a href="#" class="js-open-modal" data-modal-id="popup"> Change Cover </a>
  				<%end%>
  			</div>
  			<div id="popup" class="modal-box" style="left: 0px !important">
  				<%= form_for @user_image, :as => :user_image, 
					 url: save_user_image_path,html: { class: 'form-horizontal',method: :post } do |f| %>
					<header>
						<a href="#" class="js-modal-close close">×</a>
						<h3>
							Change Image
						</h3>

						<div class="control-group">
							<label>
								<%= f.check_box :is_cover_active %> Cover Image
							</label>
	    					<label>
								<%= f.check_box :is_profile_active %> Profile Image
							</label>
						</div>
					</header>

					<div class="modal-body">

						<%= f.file_field :image_url , class: 'profile_image'%>
						<hr>
						<div class="row-fluid">
							<div class="span8">
								<div class="nopad">
	    							<label class="image-checkbox">
	      							<img class="img-responsive" src="https://dummyimage.com/600x400/000/fff" />
	      							<input type="checkbox" name="image[]" value="" />
	      							<i class="fa fa-check hidden"></i>
	    							</label>
  								</div>
  								<div class="nopad">
	    							<label class="image-checkbox">
	      							<img class="img-responsive" src="https://dummyimage.com/600x400/000/fff" />
	      							<input type="checkbox" name="image[]" value="" />
	      							<i class="fa fa-check hidden"></i>
	    							</label>
  								</div>
  								<div class="nopad">
	    							<label class="image-checkbox">
	      							<img class="img-responsive" src="https://dummyimage.com/600x400/000/fff" />
	      							<input type="checkbox" name="image[]" value="" />
	      							<i class="fa fa-check hidden"></i>
	    							</label>
  								</div>
  								<div class="nopad">
	    							<label class="image-checkbox">
	      							<img class="img-responsive" src="https://dummyimage.com/600x400/000/fff" />
	      							<input type="checkbox" name="image[]" value="" />
	      							<i class="fa fa-check hidden"></i>
	    							</label>
  								</div>
							</div>
							
						</div>
						 
					</div>


					<footer>
						<div class="actions">
							<%= f.submit %>
						</div>
					</footer>
				<%end%>
			</div>
			
		</div>

		<img src="https://4.bp.blogspot.com/-b3Ty2n3mrOc/UR4MAXUXHDI/AAAAAAAAAWQ/CS31CdrnNY8/s1600/profp.jpg" class="propic" alt="https://4.bp.blogspot.com/-b3Ty2n3mrOc/UR4MAXUXHDI/AAAAAAAAAWQ/CS31CdrnNY8/s1600/profp.jpg" />

		<div class="row-fluid">
				<div class="span6">
				</div>

				<!-- Create New User Span -->
				<div class="span6" id="user_edit_button">
					<div class="user_button" >
						<i class="fa fa-pencil-square-o" aria-hidden="true"></i>
						<div class="create_new_user item">Edit Profile</div>			
					</div>
				</div>
				<div class="span6" id="user_edit_done_button" >
					<div class="user_button">
						<i class="fa fa-pencil-square-o" aria-hidden="true"></i>
						<div class="create_new_user item">Done Profile</div>			
					</div>
				</div>
		</div>
		<div class="row-fluid ">
			<!-- About -->
				<div class="span6">
			      	<div class="widget-box">
						<div class="widget-title"> 
							<span class="icon"><i class="icon-ok"></i></span>
							<h5>Personal Information</h5>
							<span class="icon edit_icon js-open-modal" 
								data-modal-id="edit_personal_popup">
								<i class="icon-edit"></i>
							</span>
						</div>
						<div class="widget-content">
							<div class="todo">
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Name:</strong>
								    	</span>
								    	<br> <%= @user.first_name%>
								    </p>
								</div>
								<div class ="about">
								    <p>
								    	<span>
								    		<strong> Gender:</strong>
								    	</span>
								    	<br> 
								    	
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Designation:</strong>
								    	</span>
								    	<br> Monkey D. Luffy
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Department:</strong>
								    	</span>
								    	<br> Monkey D. Luffy
								    </p>
								</div>

							</div>
						</div>
					</div>
					<div class="widget-box">
						<div class="widget-title"> 
							<span class="icon"><i class="icon-ok"></i></span>
							<h5>Attendence Infomation</h5>
							<%if @user_role.master_role_id == 1%>
								<span class="icon edit_icon js-open-modal" 
								data-modal-id="edit_attendence_popup"><i class="icon-edit"></i></span>
							<%end%>
						</div>
						<div class="widget-content">
							<div class="todo">
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Status:</strong>
								    	</span>
								    	<br> Present
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Today punch In Time:</strong>
								    	</span>
								    	<br> 12:30
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Today Punched Out Time:</strong>
								    	</span>
								    	<br> 7:30
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Total Hours:</strong>
								    	</span>
								    	<br> 8 hours
								    </p> 
								</div>
								
								
							</div>
						</div>
					</div>
				</div>

				<!-- Account  -->
				<div class="span6">
					<div class="widget-box">
						<div class="widget-title"> 
							<span class="icon"><i class="icon-ok"></i></span>
							<h5>Account Infomation</h5>
							<span class="icon edit_icon js-open-modal" 
								data-modal-id="edit_account_popup"><i class="icon-edit"></i></span>
							
						</div>
						<div class="widget-content">
							<div class="todo">
								<div class="about">
								    <p>
								    	<span>
								    		<strong>Email:</strong>
								    	</span>
								    	<br> 12
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Username:</strong>
								    	</span>
								    	<br> 3
								    </p>
								</div>
								
							</div>
						</div>
					</div>
					<div class="widget-box">
						<div class="widget-title"> 
							<span class="icon"><i class="icon-ok"></i></span>
							<h5>Leave Infomation</h5>
							<%if @user_role.master_role_id == 1%>
								<span class="icon edit_icon js-open-modal" 
								data-modal-id="edit_leave_popup">
									<i class="icon-edit"></i>
								</span>
							<%end%>
						</div>
						<div class="widget-content">
							<div class="todo">
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Total Leave:</strong>
								    	</span>
								    	<br> 12
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Used Leave:</strong>
								    	</span>
								    	<br> 3
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Leave Percentage:</strong>
								    	</span>
								    	<br> bar 23%
								    </p>
								</div>
								
								
							</div>
						</div>
					</div>

					<!-- COntact -->
			      	<div class="widget-box">
						<div class="widget-title"> 
							<span class="icon"><i class="icon-ok"></i></span>
							<h5>Contact Infomation</h5>
							<%if current_user.id == @user.id %>
								<span class="icon edit_icon js-open-modal" 
									data-modal-id="edit_contact_popup"><i class="icon-edit"></i>
								</span>
							<%end%>

						</div>

						<div class="widget-content">
							<div class="todo">
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Mobile Number:</strong>
								    	</span>

								    	<br> 9988770693
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Facebook:</strong>
								    	</span>
								    	<br> Monkey D. Luffy
								    </p>
								</div>
								<div class="about">
								    <p>
								    	<span>
								    		<strong> Instagram:</strong>
								    	</span>
								    	<br> Monkey D. Luffy
								    </p>
								</div>
								
							</div>
						</div>
					</div>

				</div>
		</div>

			<div id="edit_popup" class="modal-box" style="left: 0px !important">
  				

					 
					<header>
						<div class="js-modal-close close">×</div>
						<h3>
							Edit Information
						</h3>

	
					</header>

					<div class="popup_check">
						
					</div>

					
				
			</div>		
			
	</div>
</div>

<script type="text/javascript">

// Show Change cover popup javascript
$(function() 
{

	var appendthis = ("<div class='modal-overlay js-modal-close'></div>");

	$("a[data-modal-id]").click(function(e) {

		

		e.preventDefault();
		$("#content").append(appendthis);
		$(".modal-overlay").fadeTo(500, 0.7);
		//$(".js-modalbox").fadeIn(500);
		var modalBox = $(this).attr('data-modal-id');
		$("#" + modalBox).fadeIn($(this).data());
		
	});

	$(".js-modal-close, .modal-overlay").click(function() {
		$(".modal-box, .modal-overlay").fadeOut(200, function() {
			$(".modal-overlay").remove();
		});
	});

	$(window).resize(function() {
		$(".modal-box").css({
			top: ($(window).height() - $(".modal-box").outerHeight()) / 2,
			left: ($(window).width() - $(".modal-box").outerWidth()) / 2
		});
	});

	$(window).resize();

});

//Open popup for edit profile
$(function() 
{

	var appendthis = ("<div class='modal-overlay js-modal-close'></div>");

	$("span[data-modal-id]").click(function(e) {

		e.preventDefault();
		$("#content").append(appendthis);
		$(".modal-overlay").fadeTo(500, 0.7);
		//$(".js-modalbox").fadeIn(500);
		var modalBox = $(this).attr('data-modal-id');
		
		var id = $(this).attr('data-modal-id');
		switch (modalBox){
			case 'edit_personal_popup':
				$(".popup_check").html("<%= j render(:partial => 'edit_personal_profile')
				%>");
				break;

			case 'edit_attendence_popup':
				alert('Attendence');
			break;
			case 'edit_leave_popup':
				alert('leave');
			break;
			case 'edit_contact_popup':
				$(".popup_check").html("<%= j render(:partial => 'edit_contact_details')
				%>");
			break;
			case 'edit_account_popup':
				$(".popup_check").html("<%= j render(:partial => 'edit_account_details')
				%>");
			break;

		}

		
		
		$("#edit_popup").fadeIn($(this).data());

	});

	$(".js-modal-close, .modal-overlay").click(function() {
		$(".modal-box, .modal-overlay").fadeOut(200, function() {
			$(".modal-overlay").remove();
		});
	});

	$(window).resize(function() {
		$(".modal-box").css({
			top: ($(window).height() - $(".modal-box").outerHeight()) / 2,
			left: ($(window).width() - $(".modal-box").outerWidth()) / 2
		});
	});

	$(window).resize();

});





// image gallery
// init the state from the input
$(".image-checkbox").each(function () {

  if ($(this).find('input[type="checkbox"]').first().attr("checked")) {
    $(this).addClass('image-checkbox-checked');
  }
  else {
    $(this).removeClass('image-checkbox-checked');
  }
});

// sync the state to the input
$(".image-checkbox").on("click", function (e) {
  $(this).toggleClass('image-checkbox-checked');
  var $checkbox = $(this).find('input[type="checkbox"]');
  $checkbox.prop("checked",!$checkbox.prop("checked"))

  e.preventDefault();
});


// Show Edit profile page
$('#user_edit_button').click(function(){
	$('#user_edit_button').hide();
	$('#user_edit_done_button').show();
	$(".edit_icon").css("display", "block");

});

$('#user_edit_done_button').click(function(){
	$('#user_edit_button').show();
	$('#user_edit_done_button').hide();
	$(".edit_icon").css("display", "none");

});


</script>
